<div class="container">
  <div class="bottomBar">
    <div id="missionsContainer">
      <button class="dropdownButton" [ngClass]="{'selectedButton': showMissions}" (click)="selectMissionsDropdown()">
        Scan: {{selectedMission.missionName}}
        <fa-icon *ngIf="!showMissions" size="lg" class="fa" [icon]="faAngleDown"></fa-icon>
        <fa-icon *ngIf="showMissions" size="lg" class="fa" [icon]="faAngleUp"></fa-icon>
      </button>
      <ul class="dropdown" *ngIf="showMissions">
        <li
          *ngFor="let mission of missions"
          [class.selected]="mission.missionId === this.selectedMission.missionId"
          [value]="mission"
          (click)="missionChanged(mission)"
        >
          {{mission.missionName}}
        </li>
      </ul>
      <div *ngIf="showMissions" class="pointer"></div>
    </div>
    <div id="aislesContainer">
      <button class="dropdownButton" [ngClass]="{'selectedButton': showAisles}" (click)="selectAislesDropdown()">
        Aisle {{selectedAisle?.aisleName}}
        <fa-icon *ngIf="!showAisles" size="lg" class="fa" [icon]="faAngleDown"></fa-icon>
        <fa-icon *ngIf="showAisles" size="lg" class="fa" [icon]="faAngleUp"></fa-icon>
      </button>
      <ul *ngIf="showAisles">
        <li
          [class.selected]="aisle.aisleId === this.selectedAisle.aisleId"
          *ngFor="let aisle of aisles"
          [value]="aisle"
          (click)="aisleChanged(aisle)">
          {{aisle?.aisleName}}
        </li>
      </ul>
      <div *ngIf="showAisles" class="pointer"></div>
    </div>
    <button class="panoChangeButton" (click)="previousPano()"><fa-icon size="lg" class="fa" [icon]="faArrowLeft"></fa-icon></button>
    <button class="panoChangeButton" (click)="nextPano()"><fa-icon size="lg" class="fa" [icon]="faArrowRight"></fa-icon></button>
    <button class="rightButton" (click)="openModal('export-popup')"><img class="exportImage" src="../../assets/export-blue.png"> <span>Export</span></button>
    <button class="rightButton" (click)="resetPanoClick()">Reset Pano</button>
    <button [ngClass]="{'selectedButton': debugMode}" class="rightButton" (click)="toggleDebugMode()">Debug</button>
    
    <div class="rightDropdown rightButton">
      <button class="dropdownButton" [ngClass]="{'selectedButton': showAisles}" (click)="selectDisplayDropdown()">
        Display
        <fa-icon *ngIf="!showDisplayToggles" size="lg" class="marginLeft fa" [icon]="faAngleDown"></fa-icon>
        <fa-icon *ngIf="showDisplayToggles" size="lg" class="marginLeft fa" [icon]="faAngleUp"></fa-icon>
      </button>
      <ul class="displayDropdown" *ngIf="showDisplayToggles">
        <li (click)="displaySelected('outs')">
          <fa-icon *ngIf="currentlyDisplayed.has('outs')" size="lg" class="check" [icon]="faCheckSquare"></fa-icon>
          <fa-icon *ngIf="!currentlyDisplayed.has('outs')" size="lg" class="check" [icon]="faSquare"></fa-icon>
          Outs
        </li>
        <li (click)="displaySelected('shelfLabels')">
          <fa-icon *ngIf="currentlyDisplayed.has('shelfLabels')" size="lg" class="check" [icon]="faCheckSquare"></fa-icon>
          <fa-icon *ngIf="!currentlyDisplayed.has('shelfLabels')" size="lg" class="check" [icon]="faSquare"></fa-icon>
          Shelf Labels
        </li>
        <li *ngIf="showTopStock" (click)="displaySelected('topStock')">
          <fa-icon *ngIf="currentlyDisplayed.has('topStock')" size="lg" class="check" [icon]="faCheckSquare"></fa-icon>
          <fa-icon *ngIf="!currentlyDisplayed.has('topStock')" size="lg" class="check" [icon]="faSquare"></fa-icon>
          Top Stock
        </li>
        <li *ngIf="showSectionLabels" (click)="displaySelected('sectionLabels')">
          <fa-icon *ngIf="currentlyDisplayed.has('sectionLabels')" size="lg" class="check" [icon]="faCheckSquare"></fa-icon>
          <fa-icon *ngIf="!currentlyDisplayed.has('sectionLabels')" size="lg" class="check" [icon]="faSquare"></fa-icon>
          Section Labels
        </li>
        <li *ngIf="showSectionBreaks" (click)="displaySelected('sectionBreaks')">
          <fa-icon *ngIf="currentlyDisplayed.has('sectionBreaks')" size="lg" class="check" [icon]="faCheckSquare"></fa-icon>
          <fa-icon *ngIf="!currentlyDisplayed.has('sectionBreaks')" size="lg" class="check" [icon]="faSquare"></fa-icon>
          Section Breaks
        </li>
      </ul>
      <div *ngIf="showDisplayToggles" class="pointer displayPointer"></div>
    </div>

    <div id="collapsedContainer">
      <button class="dropdownButton" [ngClass]="{'selectedButton': showOptions}" (click)="selectOptionsDropdown()">
        Options
        <fa-icon *ngIf="!showOptions" size="lg" class="fa" [icon]="faAngleDown"></fa-icon>
        <fa-icon *ngIf="showOptions" size="lg" class="fa" [icon]="faAngleUp"></fa-icon>
      </button>
      <ul class="dropdown" *ngIf="showOptions">
        <li (click)="openModal('export-popup')">Export</li>
        <li (click)="resetPanoClick()">Reset Pano</li>
        <li (click)="toggleDebugMode()">Debug</li>
      </ul>
      <div *ngIf="showOptions" class="pointer"></div>
    </div>

  </div>

</div>
<app-export-modal id="export-popup">
  <div class="modal">
      <div class="modal-body" [ngClass]="{'disabled': currentlyExporting}">
          <div class="exportTitle">Select File To Export</div>
          <button [disabled]="currentlyExporting" (click)="exportAisle('outs','export-popup')">Outs</button>
          <button [disabled]="currentlyExporting" (click)="exportAisle('labels','export-popup')">Labels</button>
          <button *ngIf="exportOnHand" [disabled]="currentlyExporting" (click)="exportAisle('onhand','export-popup')">On Hand</button>
          <button *ngIf="exportingPDF" [disabled]="currentlyExporting" (click)="exportPDF('export-popup')">On Hand PDF</button>
          <button [disabled]="currentlyExporting" (click)="exportPano('export-popup')">Pano</button>
          <button class="cancel" (click)="closeModal('export-popup');">Close</button>
      </div>
  </div>
  <div class="modal-background"></div>
</app-export-modal>
