<div class="container">
  <div class="bottomBar">
    <div id="missionsContainer">
      <button class="dropdownButton" [ngClass]="{'selectedButton': showMissions}" (click)="selectMissionsDropdown()">
        Mission {{selectedMission?.missionDateTime | date: 'yyyy-MM-dd HH:mm:ss'}}
        <fa-icon *ngIf="!showMissions" size="lg" class="fa" [icon]="faAngleDown"></fa-icon>
        <fa-icon *ngIf="showMissions" size="lg" class="fa" [icon]="faAngleUp"></fa-icon>
      </button>
      <ul class="dropdown" *ngIf="showMissions">
        <li
          *ngFor="let mission of missions"
          [class.selected]="mission.missionId === this.selectedMission.missionId"
          [value]="mission"
          (click)="missionChanged(mission)"
        >
          {{mission?.missionDateTime | date: 'yyyy-MM-dd HH:mm:ss'}}
        </li>
      </ul>
      <div *ngIf="showMissions" class="pointer"></div>
    </div>
    <div id="aislesContainer">
      <button class="dropdownButton" [ngClass]="{'selectedButton': showAisles}" (click)="selectAislesDropdown()">
        Aisle {{selectedAisle?.aisleName}}
        <fa-icon *ngIf="!showAisles" size="lg" class="fa" [icon]="faAngleDown"></fa-icon>
        <fa-icon *ngIf="showAisles" size="lg" class="fa" [icon]="faAngleUp"></fa-icon>
      </button>
      <ul *ngIf="showAisles">
        <li
          [class.selected]="aisle.aisleId === this.selectedAisle.aisleId"
          *ngFor="let aisle of aisles"
          [value]="aisle"
          (click)="aisleChanged(aisle)"
        >
          {{aisle?.aisleName}}
        </li>
      </ul>
      <div *ngIf="showAisles" class="pointer"></div>
    </div>
    <button class="panoChangeButton" (click)="previousPano()"><fa-icon size="lg" class="fa" [icon]="faArrowLeft"></fa-icon></button>
    <button class="panoChangeButton" (click)="nextPano()"><fa-icon size="lg" class="fa" [icon]="faArrowRight"></fa-icon></button>
    <button class="rightButton" (click)="openModal('export-popup')"><img class="exportImage" src="../../assets/export-blue.png"> <span>Export</span></button>
    <button class="rightButton" (click)="resetPanoClick()">Reset Pano</button>
    <button *ngIf="displayExclusionButton" class="rightButton" [ngClass]="{'selectedButton': showExclusionZones}" (click)="toggleExclusionZones()">Exclusion Zones</button>
    
    <div id="collapsedContainer">
      <button class="dropdownButton" [ngClass]="{'selectedButton': showOptions}" (click)="selectOptionsDropdown()">
        Options
        <fa-icon *ngIf="!showOptions" size="lg" class="fa" [icon]="faAngleDown"></fa-icon>
        <fa-icon *ngIf="showOptions" size="lg" class="fa" [icon]="faAngleUp"></fa-icon>
      </button>
      <ul class="dropdown" *ngIf="showOptions">
        <li (click)="openModal('export-popup')">Export</li>
        <li (click)="resetPanoClick()">Reset Pano</li>
        <li *ngIf="displayExclusionButton" (click)="toggleExclusionZones()">Exclusion Zones</li>
      </ul>
      <div *ngIf="showOptions" class="pointer"></div>
    </div>

  </div>

</div>
<app-export-modal id="export-popup">
  <div class="modal">
      <div class="modal-body" [ngClass]="{'disabled': currentlyExporting}">
          <div class="exportTitle">Select File To Export</div>
          <button [disabled]="currentlyExporting" (click)="exportAisle('outs','export-popup')">Outs</button>
          <button [disabled]="currentlyExporting" (click)="exportAisle('labels','export-popup')">Labels</button>
          <button *ngIf="exportOnHand" [disabled]="currentlyExporting" (click)="exportAisle('onhand','export-popup')">On Hand</button>
          <button *ngIf="exportingPDF" [disabled]="currentlyExporting" (click)="exportPDF('export-popup')">On Hand PDF</button>
          <button [disabled]="currentlyExporting" (click)="exportPano('export-popup')">Pano</button>
          <button class="cancel" (click)="closeModal('export-popup');">Close</button>
      </div>
  </div>
  <div class="modal-background"></div>
</app-export-modal>
